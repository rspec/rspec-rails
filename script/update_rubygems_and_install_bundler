#!/bin/bash
# This file is manually managed unlike the rest of core rspec gems because it is independent.

set -e

function is_ruby_3_2_plus {
  if ruby -e "exit(RUBY_VERSION.to_f >= 3.2)"; then
    return 0
  else
    return 1
  fi
}


if is_ruby_3_2_plus; then
  gem update --no-document --system
  gem install --no-document bundler
else
  gem update --no-document --system '3.4.22'
  gem install --no-document bundler -v '2.6.9'

  # Bring this default gem up to last supported manually
  gem uninstall error_highlight -v 0.3.0
  gem install error_highlight -v 0.7.0
fi
